# System configuration file - TEMPLATE
# SBEMimage version 2.0
#
# DO NOT EDIT this file unless you know what you are doing!
# Comments refer to the key in the following line, with the format: explanation of the key; object in SBEMimage that manages it

[device]
# index for selected SEM in list of recognized devices, see below; sem_control (read only)
sem = 3
# index for selected microtome (or stage if no microtome used) in list of recognized devices, see below; microtome_control (read only)
microtome = 0
# list of recognized devices (SEMs and microtomes); sem_control/microtome_control (read only)
recognized = ["Gatan 3View", "ZEISS Merlin", "ZEISS Sigma", "ZEISS GeminiSEM", "ZEISS Ultra Plus", "ConnectomX katana"]
# serial port used by katana microtome; microtome_control
katana_com_port = COM1

[sem]
# factor to calculate required magnification when given the target pixel size and frame size; sem_control (read only)
mag_px_size_factor = 114278400
# list of available store resolutions (= frame sizes, in pixel width x pixel height); sem_control (read only)
store_res = [[1024, 768], [512, 384], [2048, 1536], [3072, 2304], [4096, 3072], [5120, 3840], [6144, 4608], [8192, 6144], [12288, 9216], [16384, 12288], [24576, 18432], [32768, 24576]]
# list of available dwell times in microseconds; sem_control (read only)
dwell_time = [0.05, 0.1, 0.2, 0.4, 0.8, 1.6, 3.2, 6.4, 12.8]
# list of available apertures in microns; sem_control (read only)
aperture_size = [30.0, 7.5, 10.0, 20.0, 60.0, 120.0]
# list of cycle times for a given frame size (dictionary key) and dwell time selectors (index for selected list); sem_control (read only)
cycle_time = {"0": [0.085, 0.13, 0.21, 0.38, 0.71, 1.4, 2.7, 5.3, 10.3], "1": [0.044, 0.054, 0.075, 0.12, 0.20, 0.37, 0.70, 1.4, 2.6], "2": [0.23, 0.40, 0.73, 1.4, 2.7, 5.4, 10.5, 20.6, 40.7], "3": [0.46, 0.83, 1.6, 3.1, 6.1, 12.0, 23.3, 46.0, 90], "4": [0.77, 1.4, 2.8, 5.4, 10.8, 21.0, 41.1, 84, 162], "5": [0, 0, 0, 0, 0, 0, 0, 0, 0], "6": [1.6, 3.1, 6.1, 12.2, 23.9, 46.6, 90, 180, 366], "7": [4.4, 7.1, 12.4, 23.1, 43.5, 84, 162, 324, 648], "8": [8.6, 14.6, 26.6, 50.2, 96, 186, 366, 732, 1452], "9": [14.1, 24.8, 46.1, 90, 168, 330, 648, 1296, 2586], "10": [29.1, 53.2, 102, 192, 372, 732, 1458, 2910, 5760], "11": [49.5, 90, 174, 336, 660, 1302, 2592, 5040, 10440]}
# extra time SBEMimage waits after cycle time when acquiring a frame (read only); sem_control
delay_after_cycle_time = 0.1

[stage]
# stage limits of the microtome (= limits of XY motors in micrometres), [min_x, max_x, min_y, max_y]; microtome_control
microtome_stage_limits = [-1150, 1080, -895, 845]
# Z range of the microtome in micrometres, [min_z, max_z]; microtome_control (read only)
microtome_z_range = [0, 600]
# katana microtome retract clearance in nanometres; microtome_control
katana_retract_clearance = 100000
# stage limits of the SEM (= limits of the XY motors in micrometres), [min_x, max_x, min_y, max_y]; sem_control (read only)
sem_stage_limits = [0, 130000, 0, 130000]
# Z range of the SEM stage in micrometres, [min_z, max_z]; sem_control (currently not used)
sem_z_range = [0, 50000]
# microtome stage calibration parameters, dict keys are high voltages in V, [scale_x, scale_y, rotation_x (rad), rotation_y (rad); coordinate_system
microtome_calibration_params = {"1500": [0.9341, 0.9469, 0.7288, 0.6534]}
# SEM stage calibration parameters, dict keys are high voltages in V, [scale_x, scale_y, rotation_x (rad), rotation_y (rad); coordinate_system
sem_calibration_params = {"1500": [1.0, 1.0, 0, 0]}
# speeds of microtome XY stage motors in microns/second, [speed_x, speed_y]; microtome_control
microtome_motor_speed = [62.5, 52.63]
# speeds of SEM XY stage motors in microns/second, [speed_x, speed_y]; sem_control (read only)
sem_motor_speed = [100, 100]
# XY motor tolerance in microns
xy_tolerance = 0.030
# Z motor tolerance in microns
z_tolerance = 0.003
# total number of moves, total distance (in microns), and total move duration (in s) [[X_moves, X_dist, X_duration], [Y_moves, Y_dist, Y_duration], [Z_moves, Z_dist]] carried out since the last reset
xyz_move_counter = [[0, 0, 0], [0, 0, 0], [0, 0, 0]]
# total number of failed XYZ motor moves (failed to reach target position within specified tolerance)
failed_xyz_move_counter = [0, 0, 0]
# total number of 'slow' XY motor move warnings (motors moved slower than expected, but reached target position)
slow_xy_move_counter = 0

[knife]
# duration of a full cut cycle (near, cut, clear) in seconds; microtome_control
full_cut_duration = 16
# Z distance sample is retracted during a sweep, in nanometres: microtome_control (currently read only)
sweep_distance = 70
# katana microtome clear position in nanometres; microtome_control
katana_clear_position = 4000

[plc]
# True if plasma cleaner ('plc'; = downstream asher) installed; main_controls (read only)
installed = False
# serial port used by plasma cleaner; main_controls (read only), launches plasma_cleaner
com_port = COM5

[email]
# email account used for remote monitoring and commands (password is provided by user at runtime, not stored anywhere); notifications (read only)
account = account_name@server.ch
# SMTP server for the email account above; notifications (read only)
smtp_server = smtp.server.ch
# IMAP server for the email account above; notifications (read only)
imap_server = imap.server.ch

[metaserver]
# URL of the server to which metadata is being sent while an acquisition is running (for example, VIME Server); notifications
url = https://remote.server.ch
# email of the administrator of the metadata server (for alerts and remote control); notifications
admin_email = account_name@server.ch